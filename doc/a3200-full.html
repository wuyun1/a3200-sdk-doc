

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; A3200 SDK v0.6 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="A3200 SDK v0.6 documentation" href="../index.html"/>
        <link rel="next" title="GomSpace ASF Library" href="../lib/libasf/doc/libasf.html"/>
        <link rel="prev" title="Welcome to A3200-FULL’s Documentation" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> A3200 SDK</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a3200-sdk-main-modules">A3200 SDK Main modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/libasf/doc/libasf.html">GomSpace ASF Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/libasf/doc/libasf.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libasf/doc/libasf.html#structure">Structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/liba3200/doc/liba3200.html">GomSpace A3200 Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/liba3200/doc/liba3200.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/liba3200/doc/liba3200.html#a3200-board">A3200 board</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/liba3200/doc/liba3200.html#structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/liba3200/doc/liba3200.html#a3200-board-parameters">A3200 Board Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/liba3200/doc/liba3200.html#drivers-and-api">Drivers and API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/libcsp/doc/libcsp.html">CubeSat Space Protocol</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/libcsp/README.html">The Cubesat Space Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libcsp/doc/history.html">History</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libcsp/doc/structure.html">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libcsp/doc/interfaces.html">CSP Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libcsp/doc/memory.html">How CSP uses memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libcsp/doc/protocolstack.html">The Protocol Stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libcsp/doc/topology.html">Network Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libcsp/doc/mtu.html">Maximum Transfer Unit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libcsp/doc/example.html">Client and server example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/libutil/doc/libutil.html">GomSpace Util Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/libutil/doc/libutil.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libutil/doc/libutil.html#structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libutil/doc/libutil.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/libparam/doc/libparam.html">GomSpace Parameter Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/libparam/doc/libparam.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libparam/doc/libparam.html#system-overview">System overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libparam/doc/libparam.html#gosh-local-parameter-interface">GOSH: Local parameter interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libparam/doc/libparam.html#gosh-remote-parameter-client">GOSH: Remote parameter client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libparam/doc/libparam.html#network-api">Network API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libparam/doc/libparam.html#structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libparam/doc/libparam.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/libgosh/doc/libgosh.html">GOSH - GomSpace Shell Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/libgosh/doc/libgosh.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libgosh/doc/libgosh.html#structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libgosh/doc/libgosh.html#console">Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libgosh/doc/libgosh.html#command-parser">Command Parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libgosh/doc/libgosh.html#defining-new-commands">Defining new commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libgosh/doc/libgosh.html#linker-optimizations">Linker-optimizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libgosh/doc/libgosh.html#implementing-a-handler-function">Implementing a handler function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libgosh/doc/libgosh.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/libgssb/doc/libgssb.html">GomSpace Sensor Bus Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/libgssb/doc/libgssb.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libgssb/doc/libgssb.html#structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libgssb/doc/libgssb.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/liblog/doc/liblog.html">GomSpace Log Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/liblog/doc/client-cmd.html">Client Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/libstorage/doc/libstorage.html">GomSpace Storage Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/libstorage/doc/libstorage.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libstorage/doc/libstorage.html#structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libstorage/doc/libstorage.html#implementation">Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libstorage/doc/libstorage.html#gosh-commands">GOSH Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/libftp/doc/libftp.html">GomSpace FTP Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/libftp/doc/libftp.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libftp/doc/libftp.html#structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/libftp/doc/libftp.html#gosh-commands">GOSH Commands</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">A3200 SDK</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Introduction</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/doc/a3200-full.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>This manual describes the A3200 SDK software package.</p>
<p>The A3200 SDK software package consist of a main module and a comprehensive set of
software modules for a complete A3200 SDK application.</p>
<p>The A3200 SDK includes a set of advanced and feature rich modules that enable fast and efficient
development of rich featured OBC applications for NanoMind A3200 Board:
* Board Support Package, including FreeRTOS
* CSP Communication, including drivers for I2C, CAN and USART (KISS)
* Parameter System for Configuration and Status
* Console interface for test and control
* GomSpace Sensor Bus (GSSB) interface for controlling GSSB devices
* FTP Service for upload and download of data.
* File system for Flash Storage</p>
<p>The main software modules and the included libraries are described in the following chapters.</p>
<div class="section" id="a3200-sdk-main-modules">
<h2>A3200 SDK Main modules<a class="headerlink" href="#a3200-sdk-main-modules" title="Permalink to this headline">¶</a></h2>
<p>This chapter describes the main software module for the A3200 SDK application.
The A3200 SDK application contains a single source code module <cite>hook.c</cite> in the src folder.</p>
<p>The file <cite>hook.c</cite> provides 3 hook functions that enables initialisation of the NanoMind A3200 application
at different stages of the boot sequence. This allows initiliasation of the entire mission specific code
by modifying only the file <cite>hook.c</cite> and adding all mission specific code either to the <cite>hook.c</cite> file or by adding
mission specific source code modules to the <cite>src</cite> folder and calling this code form <cite>hook.c</cite>.</p>
<p>If more fine grained control of boot sequence is required, please see <a class="reference internal" href="#a3200-full-advanced-options"><span>Advanced options</span></a> for
details on changing the default boot behaviour.</p>
<div class="section" id="hook-c">
<h3>hook.c<a class="headerlink" href="#hook-c" title="Permalink to this headline">¶</a></h3>
<p>The file <cite>hook.c</cite> provides 3 hook functions that enables initialisation of the NanoMind A3200 application
at different stages of the boot sequence:</p>
<ul class="simple">
<li><cite>hook_main()</cite> - called very early in <cite>main()</cite></li>
<li><cite>hook_init_early()</cite> - called in the begging of <cite>task_init()</cite></li>
<li><cite>hook_init()</cite> - called right at the end of <cite>task_init()</cite></li>
</ul>
<p>Listing of <cite>hook.c</cite>:</p>
<div class="highlight-c"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>

<span class="cm">/**</span>
<span class="cm"> * hook_main:</span>
<span class="cm"> * This function is called by the board initialization routine in the file</span>
<span class="cm"> * main.c after setting up watchdog and csp, but before going into task context</span>
<span class="cm"> *</span>
<span class="cm"> * Important:</span>
<span class="cm"> * Do not use printf&#39;s here</span>
<span class="cm"> * Do not use FreeRTOS API calls here, since the scheduler is not running</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">hook_main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
	<span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * hook_init_early:</span>
<span class="cm"> * This function is called by the task_init.c just at the beginning of the task</span>
<span class="cm"> * This happens before initialization of filesystems and the console task.</span>
<span class="cm"> * It is now safe to use FreeRTOS API calls, malloc and printf&#39;s.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">hook_init_early</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
	<span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * hook_init:</span>
<span class="cm"> * This function is called when the system is finally fully initialized.</span>
<span class="cm"> * Here you can expect the filesystem to be operative.</span>
<span class="cm"> *</span>
<span class="cm"> * Use this function to start new FreeRTOS tasks, that will run the mission</span>
<span class="cm"> * software.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">hook_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Welcome to nanomind...</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>

	<span class="c1">// Implement your code here</span>

<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>When the system has finished booting it calls the hook_init() function where custom mission code can be added.</p>
<p>Example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">init_custom_code_and_tasks</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>

   <span class="n">init_custom_payload</span><span class="p">();</span>

   <span class="k">extern</span> <span class="kt">void</span> <span class="n">task_custom_server</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">parameters</span><span class="p">);</span>
   <span class="n">xTaskCreate</span><span class="p">(</span><span class="n">task_custiom_server</span><span class="p">,</span> <span class="s">&quot;CUSTSRV&quot;</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

<span class="p">}</span>

<span class="kt">void</span> <span class="nf">hook_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Welcome to nanomind...</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>

   <span class="c1">// Implement your code here</span>
   <span class="n">init_custom_code_and_tasks</span><span class="p">();</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="advanced-options">
<span id="a3200-full-advanced-options"></span><h3>Advanced options<a class="headerlink" href="#advanced-options" title="Permalink to this headline">¶</a></h3>
<p>When the NanoMind A3200 application boots, the code in <cite>main.c</cite> will initialise the first peripherals such as the USART.
After that the code in <cite>task_init.c</cite> will initialise the remaining periphirals suach as the I2C and CA interfaces, GSSB devices etc.
It also initialises the CSP network stack, the network interfaces and the basic console commands.</p>
<p>The files <cite>main.c</cite> and <cite>task_init.c</cite> are located in <cite>lib/liba3200/src</cite>. These files should normally not be modified,
but if special boot sequence or initialisation is required, it is possible to modify the this.</p>
<p>The recommended approach is to copy the three files <cite>main.c</cite> <cite>task_init.c</cite> and <cite>server.c</cite> files from <cite>lib/liba3200/src</cite> to
the <cite>src</cite> folder and then change the wscript option <cite>enable_main</cite> option from True to False. In this way, the modules
<cite>main.c</cite> <cite>task_init.c</cite> and <cite>server.c</cite> in the <cite>src</cite> folder will be compiled instead of the corresponding files in <cite>lib/liba3200/src</cite> folder.
The files in the <cite>src</cite> can then be modified for specific needs, without changing the liba3200 code.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../lib/libasf/doc/libasf.html" class="btn btn-neutral float-right" title="GomSpace ASF Library">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to A3200-FULL’s Documentation"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, GomSpace.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'v0.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>